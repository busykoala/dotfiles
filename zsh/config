autoload -U promptinit colors && colors
promptinit

# set prompt theme
prompt walters
PS1='%u%{$reset_color%}$(git_branch_prompt)%{$fg[blue]%}%%>%{$reset_color%} '
setopt promptsubst

# load functions
fpath=(~/dotfiles/zsh/functions $fpath)
autoload -U ~/dotfiles/zsh/functions/*(:t)

#change directory without cd
setopt autocd

# stty config
stty icrnl

# HISTORY
HISTSIZE=3000
SAVEHIST=3000
HISTFILE=~/.zsh_history
bindkey "^[[A" history-beginning-search-backward
bindkey "^[[B" history-beginning-search-forward

# use the vi navigation keys in menu completion
zstyle ':completion:*' menu select
zmodload zsh/complist
bindkey -M menuselect 'h' vi-backward-char
bindkey -M menuselect 'k' vi-up-line-or-history
bindkey -M menuselect 'l' vi-forward-char
bindkey -M menuselect 'j' vi-down-line-or-history

# bind delete key to delete key :)
bindkey "\e[3~" delete-char

# exports
export PATH=/usr/local/bin:/Developer/usr/bin:/Users/busykoala/bin:/opt/local/bin:/opt/local/sbin:$PATH
export LC_CTYPE=en_US.UTF-8
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8

# colored
export CLICOLOR_FORCE=1
export CLICOLOR=1
export TERM=xterm-color

# ftw.upgrade
export UPGRADE_AUTHENTICATION=admin:admin

# OpenSSL
export CPPFLAGS="${CPPFLAGS} -I$(brew --prefix openssl)/include"
export LDFLAGS="${LDFLAGS} -L$(brew --prefix openssl)/lib"
export PATH="/usr/local/opt/openssl/bin:$PATH"

# pyenv and pyenv-virtualenvwrapper (von Joni)
hash pyenv 2>/dev/null && eval "$(pyenv init -)" && eval "$(pyenv virtualenv-init -)" && export PYTHON_CONFIGURE_OPTS="--enable-optimizations"

# pyenv activate by workon function
workon(){source $(pyenv root)/versions/"$1"/bin/activate}
compctl -/ -W $(pyenv root)/versions/ workon

# search omelette by filename
omelettefind(){find -L /Users/busykoala/.buildout/eggs/ -name "*$1*"}

# start nvm (brew installed)
export NVM_DIR="$HOME/.nvm"
. "$(brew --prefix nvm)/nvm.sh"

# Setting PATH for Python 3.7
# The original version is saved in .zprofile.pysave
PATH="/Library/Frameworks/Python.framework/Versions/3.7/bin:${PATH}"
export PATH

# Add Ruby path
export PATH=$PATH:/usr/local/lib/ruby/gems/2.5.0/bin
